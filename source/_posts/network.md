---
title: ç½‘ç»œç ´é˜²å®è·µå…ˆå¯¼å®éªŒä¸€â€”â€”â€”â€”æ•°ç»„è¶Šç•Œæ£€æµ‹å¿ƒå¾—
tags: ç½‘ç»œç ´é˜²å®è·µå…ˆå¯¼
cover: 'https://s2.loli.net/2022/04/05/kq4YLIQsoemf1g5.jpg'
top_img: 'https://s2.loli.net/2022/04/05/7kQeTq3WU1goBs2.jpg'
abbrlink: 94f62543
date: 2022-04-01 02:45:36
---

### 1.å‰è¨€

**ç½‘ç»œæ”»é˜²å®è·µå…ˆå¯¼**ï¼Œå¬ç€åå­—å¾ˆé«˜å¤§ä¸Šå§ï¼Œæ­£å¦‚å®ƒçš„åå­—é‚£èˆ¬ï¼Œå®ƒçš„éš¾åº¦ä¹Ÿæ˜¯éå¸¸çš„å¤§: (ã€‚ä½œä¸ºä¸€é—¨ä»Šå¹´æ–°å¼€çš„è¯¾ï¼Œå±äºå››é—¨å…ˆå¯¼è¯¾ç¨‹ä¹‹ä¸€ï¼ˆå‰©ä¸‹ä¸‰é—¨åˆ†åˆ«æ˜¯è½¯ä»¶å·¥ç¨‹å…ˆå¯¼ã€äººå·¥æ™ºèƒ½å…ˆå¯¼å’Œå¿˜äº†å«å•¥å…ˆå¯¼ï¼‰ã€‚åœ¨ä¸Šå­¦æœŸé€‰è¯¾çš„æ—¶å€™ï¼Œ110äººçš„è¯¾ï¼Œé€‰äº†139äººï¼Œå¯è§å…¶ç«çˆ†ç¨‹åº¦ï¼Œä¹Ÿè®¸æ˜¯**ç½‘ç»œ**å’Œ**æ”»é˜²**è¿™ä¸¤ä¸ªè¦ç´ å¸å¼•äººï¼Œæ‰€ä»¥è¿™é—¨è¯¾çš„ç¬¬ä¸€ä¸ªå®éªŒâ€”â€”**æ•°ç»„è¶Šç•Œçš„æ£€æµ‹**ï¼Œä¸ä¸Šè¿°ä¸¤ç‚¹çœ‹èµ·æ¥ä¼¼ä¹æ²¡æœ‰ä¸æ¯«å…³ç³»ï¼Œä½†æ˜¯éš¾åº¦è¿˜æå¤§ï¼Œè¿™å°±é€ æˆäº†ï¼Œå¾ˆå¤šäººé€€è¯¾ï¼ˆæ¯•ç«Ÿæ‰0.5å­¦åˆ†ï¼‰ã€‚æˆªæ­¢è‡³2022å¹´4æœˆ1æ—¥02ç‚¹54åˆ†ï¼Œ139çš„è¯¾ç°åœ¨è¿˜å‰©39äºº.......æˆ‘æï¼Œæœ‰å¹¸å¿åˆ—å…¶ä¸­ã€‚è¿™è¶³ä»¥çœ‹å‡ºè¿™é—¨è¯¾æœ‰å¤šéš¾äº†å§ï¼Œæ¥ä¸‹æ¥æˆ‘ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹æˆ‘å†™è¿™é—¨è¯¾çš„ä¸€äº›å¿ƒå¾—ä¸ä½“ä¼šå§ï¼ˆä¸»è¦æ˜¯å†™ç»™è‡ªå·±çœ‹çš„ï¼Œè¦æ˜¯æœ‰ä¸è®¤è¯†æˆ‘çš„äººçœ‹åˆ°äº†è¿™ç¯‡åšå®¢ï¼Œç®—ä½ å‰å®³ğŸ¤”ï¼‰



### 2.å®éªŒä»‹ç»

å®éªŒçš„è¦æ±‚å¾ˆç®€å•ï¼Œç¼–å†™ä¸€ä¸ªæ–‡ä»¶checker.cppï¼Œè¦æ±‚å®ç°æ•°ç»„è¶Šç•Œçš„æ£€æµ‹ã€‚ä»¥ä¸‹æ˜¯åŸè¯ï¼š

> æœ¬æ¬¡å®éªŒè‡ªæ‹Ÿäº†ä¸€ç§ç±»ä¼¼Cè¯­è¨€æ•°ç»„çš„è¯­æ³•ï¼Œç§°ä¸ºeasy Cï¼Œå…¶ä»…åŒ…å«ç®€å•çš„å˜é‡å£°æ˜ï¼Œç®—æœ¯è¡¨è¾¾å¼å’Œæ•°ç»„æ“ä½œï¼Œæ–‡ä»¶åç¼€ä¸º`.ec`ã€‚æœ¬æ¬¡å®éªŒçš„ç›®çš„æ˜¯**ä½¿ç”¨c++è¯­è¨€ç¼–å†™ä¸€ä¸ªæ£€æµ‹ç¨‹åºï¼Œæ£€æµ‹è¾“å…¥çš„`.ec`æ–‡ä»¶ä¸­æ•°ç»„ä½¿ç”¨çš„ç´¢å¼•å€¼æ˜¯å¦è¶…è¿‡æ•°ç»„å®šä¹‰çš„æœ€å¤§é•¿åº¦**ã€‚



çœ‹èµ·æ¥ï¼Œä¼¼ä¹å¾ˆç®€å•ï¼Œå·´ç‰¹ï¼Œç„¶å¹¶ä¸ã€‚



### 3.å®éªŒåˆ†æ

ç”±äºä½¿ç”¨äº†è‡ªå®šä¹‰çš„easycè¯­æ³•ï¼Œæ‰€ä»¥é€»è¾‘ä¸Šå’Œæˆ‘ä»¬å¹³æ—¶çš„cè¯­è¨€æœ‰äº›è®¸ä¸åŒï¼Œä½†æ˜¯è¿˜å¥½ï¼Œeasycç®€åŒ–å¾ˆå¤šä¸œè¥¿ï¼Œä½¿å…¶å˜å¾—å’ŒPythonè¯­æ³•é‚£èˆ¬ç®€æ´ã€‚åœ¨easycä¸­ï¼Œç¨‹åºæ‰§è¡Œè¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š**å˜é‡èµ‹å€¼VarDef**ï¼ˆä¿å­˜åœ¨VarDefListï¼‰ å’Œ **æ•°ç»„å¼•ç”¨ArrayUse**ï¼ˆä¿å­˜åœ¨ArrayUseListï¼‰ï¼Œæ‰§è¡Œé¡ºåºä¸Šï¼Œå…ˆæ‰§è¡Œå®Œæ‰€æœ‰å˜é‡èµ‹å€¼åï¼Œå†è¿›è¡Œæ•°ç»„å¼•ç”¨ã€‚æˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯ï¼Œ**éå†è¿™ä¸¤ä¸ªéƒ¨åˆ†ï¼Œéå†å…¶ä¸­çš„å’Œæ•°ç»„è¶Šç•Œæœ‰å…³çš„è¡¨è¾¾å¼ï¼Œå¹¶åˆ¤æ–­å…¶æ˜¯å¦è¶Šç•Œ**ã€‚åœ¨å­˜å‚¨ç»“æ„ä¸­ï¼Œå˜é‡çš„å®šä¹‰å’Œæ•°ç»„çš„å¼•ç”¨å¤§é‡çš„ç”¨åˆ°äº†æ ‘ç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š

![image-20220401032431540](https://s2.loli.net/2022/04/01/rudhv5mA3Dit7f9.png)

![image-20220401032527321](https://s2.loli.net/2022/04/01/njyuRsqIr98kltP.png)

ä¸Šå›¾ä¸­`VarDefList`å…ƒç´ ä»0å¼€å§‹ï¼Œé•¿åº¦ä¸º3ï¼Œè¡¨ç¤ºå›¾ä¸­ä»å·¦è‡³å³3ä¸ªå˜é‡çš„å®šä¹‰è¯­å¥ï¼Œ`ArrayUseList`å…ƒç´ ä»0å¼€å§‹ï¼Œé•¿åº¦ä¸º4ï¼Œè¡¨ç¤ºå›¾ä¸­ä»å·¦è‡³å³4ä¸ªè¡¨è¾¾å¼è¯­å¥ã€‚

ç„¶åï¼Œè¿™ä¸ªcheckeræ–‡ä»¶é‡Œé¢ï¼Œå®šä¹‰äº†å››ç§ç»“æ„ä½“ï¼Œåˆ†åˆ«æ˜¯`ArrExpr`ã€`Expression`ã€`ArrayUse`å’Œ`VarDef`,è¿™å››ä¸ªç»“æ„ä½“å°±æ˜¯æ•´ä¸ªå®éªŒè¦æ“ä½œçš„å¯¹è±¡ï¼Œ

`ArrExpr`ç»“æ„ä½“å®šä¹‰äº†æ•°ç»„è¡¨è¾¾å¼ï¼š

```c++
struct ArrExpr{
    std::string id;
    int dimension;
    std::vector<struct Expression*> length;
};
```



`Expression`è¡¨è¾¾è¡¨è¾¾å¼ç»“æ„:

```c++
struct Expression{
    int grammartype;
    std::string id;
    std::string op;
    struct ArrExpr *arrexpr;
    struct Expression* expr;
    std::string digitsequence;
};
```



`ArrayUse`ä»£è¡¨æ•°ç»„çš„ä½¿ç”¨:

```
struct ArrayUse{
    int grammartype;
    struct ArrExpr *arrexpr;
    struct Expression *expression;
    std::string id;
    std::string op;
};
```



`VarDef`è¡¨ç¤ºå˜é‡çš„å®šä¹‰:

```
struct VarDef{
    int grammartype;
    std::string id;
    int dimension;
    std::vector<struct Expression*> length;
};
```



è¿™äº›å¤§æ¦‚å°±æ˜¯é¢˜ç›®çš„ä¿¡æ¯äº†ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œéš¾ç‚¹æœ‰ä»¥ä¸‹è¿™äº›ï¼š

- å¯¹C++çš„å‡½æ•°å’Œè¯­æ³•ä¸ç†Ÿæ‚‰ï¼ˆå¤§ä¸€é™å®šï¼‰

- å¯¹C++çš„vectorå®¹å™¨ç”¨æ³•çš„ä¸ç†Ÿæ‚‰ï¼ˆå¤§ä¸€é™å®šï¼‰

- å¯¹æ ‘å’Œæ ˆæ¦‚å¿µçš„ä¸ç†Ÿæ‚‰ï¼ˆå¤§ä¸€é™å®šï¼‰

- è®¡ç®—Expressionçš„å€¼

- è°ƒè¯•éœ€è¦åœ¨linuxä¸‹è¿›è¡Œï¼ŒæŠ¥é”™ä¿¡æ¯æå°‘ï¼ˆä¸ä¼šç”¨Linuxä¸‹è°ƒè¯•é™å®šï¼‰

- åˆ«çš„ç§‘ç›®å ç”¨æ—¶é—´è¾ƒå¤š

- æ‡’.......

  

å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå®éªŒå¯¹å¤§ä¸€æ¥è¯´çœŸå¿ƒä¸å‹å¥½ã€‚å¯„ï¼

ä¸è¿‡è¿˜å¥½è¿™ä¸ªå®éªŒæ˜¯é¢å‘41ä¸ªæ ·ä¾‹è¿›è¡Œçš„ç¼–ç¨‹ï¼Œä¸ç”¨è€ƒè™‘è¿‡å¤šæƒ…å†µã€‚



### 4.å®éªŒéƒ¨åˆ†ä»£ç å±•ç¤º

è¿™ä¸ªå®éªŒæœ€éš¾çš„éƒ¨åˆ†æ˜¯å®ç°Expressionçš„è®¡ç®—ï¼Œå› ä¸ºè¿™ä¸ªExpressionæ˜¯å¯ä»¥åµŒå¥—è°ƒç”¨çš„ï¼Œæ‰€ä»¥éœ€è¦ç”¨åˆ°æ ˆçš„çŸ¥è¯†ï¼Œè¿™é‡Œæˆ‘é€‰æ‹©ä½¿ç”¨ä½¿ç”¨é€’å½’å‡½æ•°è§£å†³ï¼Œå› ä¸ºæ‰€æœ‰çš„è¡¨è¾¾å¼ï¼Œè¿›è¡Œæ‹†åˆ†ï¼Œæœ€åçš„ç»“æœåªèƒ½æ˜¯ï¼š**å¸¸æ•°**ï¼Œ**æ•°ç»„çš„å¼•ç”¨** å’Œ **å˜é‡çš„å¼•ç”¨** ä¸‰ä¸ªä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼Œæ‰€ä»¥åªè¦ä»¥è¿™ä¸‰ç§ç»“æœä¸ºé€’å½’å‡½æ•°çš„å‡ºå£ï¼Œå°±å¯ä»¥å®ç°EXpressionçš„è®¡ç®—äº†ã€‚

æˆ‘ç¼–å†™çš„è®¡ç®—Expressionçš„calcå‡½æ•°:

```c++
int calc(struct Expression* exp){
	if (!checkflag and exp->arrexpr != NULL){		
		int uselen;
		for (int j=0;j<exp->arrexpr->dimension;j++){
			uselen = calc(exp->arrexpr->length[j]);			//åˆ¤æ–­Expressionçš„å€¼æ˜¯å¦åˆæ³• 
			if (uselen < 0 or uselen >= idmap[exp->arrexpr->id + "+" + std::to_string(j+1)]) checkflag = true;
		}
	}
	if (!exp->digitsequence.empty() and exp->op.empty()){  //å¸¸æ•°çš„å‡ºå£ 
		return std::stoi(exp->digitsequence);
	}
	else if (!exp->id.empty() and exp->op.empty()){		//å˜é‡çš„å‡ºå£ 
		return idmap[exp->id];
	}
	else if (exp->arrexpr != NULL and exp->op.empty()){	//æ•°ç»„å¼•ç”¨çš„å‡ºå£ 
		std::string id;
		id = exp->arrexpr->id;
		for (int j=0; j < exp->arrexpr->dimension ; j++){
			id += "_" + std::to_string(calc(exp->arrexpr->length[j]));
		}
		return idmap[id];

	}
	else{
		//ç”±äºæ²¡æœ‰è€ƒè™‘ç®—æ•°ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥æ¯ç§ç¬¦å·çš„å¼•ç”¨æ–¹å¼æ˜¯ç›¸åŒçš„ï¼Œå¯ä»¥æ‰©å±•åˆ°æ— ç©·å¤šç§ç¬¦å· 
		if (exp->op == "+"){
			if (!exp->digitsequence.empty()) return std::stoi(exp->digitsequence) + calc(exp->expr);   //å¸¸æ•° 
			else if (!exp->id.empty()) return idmap[exp->id] + calc(exp->expr);						   //å˜é‡ 
			else{																				   	   //æ•°ç»„ 
				std::string id;
				id = exp->arrexpr->id;
				for (int j=0; j < exp->arrexpr->dimension ; j++) {
					id += "_" + std::to_string(calc(exp->arrexpr->length[j]));}
				return idmap[id] + calc(exp->expr);
			} 
		}
		else if (exp->op == "-"){
                      if (!exp->digitsequence.empty()) return std::stoi(exp->digitsequence) - calc(exp->expr);
                      else if (!exp->id.empty()) return idmap[exp->id] - calc(exp->expr);
                      else{ 
                                std::string id;
                                id = exp->arrexpr->id;
                                for (int j=0; j < exp->arrexpr->dimension ; j++) id += "_" + std::to_string(calc(exp->arrexpr->length[j]));
                                return idmap[id] - calc(exp->expr);
                        }

              }
              else if (exp->op == "*"){
                      if (!exp->digitsequence.empty()) return std::stoi(exp->digitsequence) * calc(exp->expr);
                      else if (!exp->id.empty()) return idmap[exp->id] * calc(exp->expr);
                      else{ 
                                std::string id;
                                id = exp->arrexpr->id;
                                for (int j=0; j < exp->arrexpr->dimension ; j++) id += "_" + std::to_string(calc(exp->arrexpr->length[j]));
				return idmap[id] * calc(exp->expr);
                        }

              }
              else if (exp->op == "/"){
                      if (!exp->digitsequence.empty()) return std::stoi(exp->digitsequence) / calc(exp->expr);
                      else if (!exp->id.empty()) return idmap[exp->id] / calc(exp->expr);
                      else{ 
                                std::string id;
                                id = exp->arrexpr->id;
                                for (int j=0; j < exp->arrexpr->dimension ; j++) id += "_" + std::to_string(calc(exp->arrexpr->length[j]));
                                return idmap[id] / calc(exp->expr);
                        }
 
              }
		}
	}
```

ç›®å‰å·²çŸ¥çš„é—®é¢˜ï¼šæ²¡æœ‰è€ƒè™‘ç®—æ•°ä¼˜å…ˆçº§ï¼Œæ‰€ä»¥è®¡ç®—å‡ºæ¥çš„ç»“æœä¸ä¸€å®šæ­£ç¡®ã€‚



checkerå‡½æ•°ï¼š

```c++
std::map<std::string, int> idmap;
int calc(struct Expression* exp);
bool checkflag = false;

void checker(){
    for (int i = 0; i < ArrayUseList.size(); ++i) {
	    struct ArrayUse* arruse = ArrayUseList[i];
	    if (arruse->arrexpr == NULL){
		    idmap[arruse->id] = std::stoi(arruse->expression->digitsequence);
	    }
    }  //åœ¨æ•°ç»„å®šä¹‰ä¹‹å‰ï¼Œå…ˆè¿›è¡Œå˜é‡çš„èµ‹å€¼ï¼Œé˜²æ­¢å‡ºç°å®šä¹‰æ—¶å˜é‡å€¼æœªçŸ¥çš„æƒ…å†µ 
    
    
    for (int i = 0; i < VarDefList.size(); ++i) {
        struct VarDef *def = VarDefList[i];
	std::string id;
	if (def->dimension == 0){    //å˜é‡å®šä¹‰ 
		continue;
		}
	for (int j = 0; j < def->dimension;j++){     //æ•°ç»„å®šä¹‰ 
		idmap[def->id + "+" + std::to_string(j+1)] = calc(def->length[j]);	
		}
	}
	//å˜é‡å’Œæ•°ç»„å®šä¹‰ 
	

    for (int i = 0; i < ArrayUseList.size(); ++i) {
        struct ArrayUse* arruse = ArrayUseList[i];
		int uselen = 0;
        std::string id;
		if (checkflag == true) break;
		
		if (arruse->arrexpr == NULL){       //å˜é‡çš„èµ‹å€¼ 
			id = arruse->id;
			idmap[id] = std::stoi(arruse->expression->digitsequence);
		}
		
		else{				    //æ•°ç»„çš„å¼•ç”¨ 
			id = arruse->arrexpr->id;
			for (int j=0;j<arruse->arrexpr->dimension;j++){
					
				uselen = calc(arruse->arrexpr->length[j]);
				
				if (checkflag or uselen < 0 or uselen >= idmap[arruse->arrexpr->id + "+" + std::to_string(j+1)]){
					checkflag = true;
					break;    //åˆ¤æ–­æ•°ç»„æ˜¯å¦è¶Šç•Œï¼ˆå…¶ç´¢å¼•å€¼æ˜¯å¦ä¸ºè´Ÿæ•°æˆ–è€…è¶…å‡ºå®šä¹‰å€¼ï¼‰ 
				}
				
				id += "_" + std::to_string(calc(arruse->arrexpr->length[j]));
			}
			if (checkflag) break;
			idmap[id] = calc(arruse->expression);//å°†åˆæ³•çš„æ•°ç»„èµ‹å€¼æ·»åŠ åˆ°æ˜ å°„è¡¨ä¸­ï¼Œä»¥ä¾¿æ¥ä¸‹æ¥å¼•ç”¨	
		}
 
 }
    if (checkflag == false){
	    std::cout<<"Correct"<<std::endl;  //è¾“å‡ºç»“æœ 
    }
    else std::cout<<"Out of bound"<<std::endl;

}
```



### 5.å¿ƒå¾—

å¥½éš¾å¥½éš¾å¥½éš¾å¥½éš¾ï¼Œå½“æ—¶å’Œå¥½å…„å¼Ÿåœ¨å½¢ç­–è¯¾ä¸Šæ¿€æƒ…è®¨è®ºï¼Œç„¶åä¹Ÿæ²¡å–å¾—å•¥å®è´¨æ€§è¿›å±•ï¼ˆå½“å¤©ä¸‹åˆå°±è¢«å°æ ¡äº†ï¼Œç°åœ¨è·ç¦»å°æ ¡éƒ½è¿‡å»äº†ä¸‰å‘¨ï¼Œæ²¡æœ‰å•¥è§£å°çš„è¿¹è±¡ï¼Œç„¯ï¼ï¼‰ï¼Œæ™šä¸Šç†¬äº†å‡ ä¸ªå¤§å¤œï¼Œé‡åˆ°äº†ä¸€å †å¥‡å¥‡æ€ªæ€ªçš„bugã€‚æœ€æ¶å¿ƒçš„æ˜¯ï¼Œç›´æ¥ç¼–è¯‘è¿è¡Œï¼ŒæŠ¥é”™ä¿¡æ¯åªæœ‰æ ¸å¿ƒé”™è¯¯ï¼Œè¿™å°±å¯¼è‡´äº†æˆ‘Debugçš„æ—¶é—´æ¯”å†™ä»£ç çš„æ—¶é—´é•¿å¾—å¤šçš„å¤šçš„å¤šã€‚è¿™ä¹Ÿè®©æˆ‘åæ¥è·‘å»å­¦äº†å­¦æ€ä¹ˆåœ¨IDEé‡Œè¾¹æ‰“æ–­ç‚¹è°ƒè¯•ï¼ˆä¹‹å‰æˆ‘éƒ½æ˜¯Printæˆ˜å£«ï¼Œç„¯ï¼‰ã€‚æ€»ä¹‹ï¼Œè¿™æ¬¡å®éªŒè¿˜æ˜¯è®©æˆ‘å­¦åˆ°ä¸å°‘å¥½ä¸œè¥¿çš„ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡ä¸€å¤§å †åºŸè¯çš„æ–‡ç« ï¼ˆåæ­£ä¹Ÿæ˜¯æˆ‘è‡ªå·±çœ‹çš„å˜»å˜»ï¼‰ã€‚
